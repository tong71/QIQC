import streamlit as st

def app():
    st.title("驗證模式：資料檢驗與異常填答偵測")
    st.markdown("""
1. **初始設定**  
    - 說明因子分析與例子（如人格五大特質、MBTI等）
    - 輸入問卷題數、樣本數、預期因子數，並上傳問卷資料（csv 或 Excel）
2. **因子分析適配性檢定**  
    - KMO 指數 > 0.6 與 Bartlett’s 檢定（p < 0.05）判斷資料適合因子分析
3. **因子數建議與可視化**  
    - 系統自動繪製 Scree Plot、Eigenvalue 表、Cumulative Variance 解釋圖
    - 根據 Elbow Method、Eigenvalue>1、變異量>60% 動態建議最佳因子數
4. **執行因子分析與題目歸因**  
    - 根據載荷值自動將題目歸類並標記低載荷與跨因子題項
5. **一致性檢驗（Cronbach’s α）**  
    - 計算各因子內部一致性，標記可能影響一致性的題項
6. **異常填答偵測模型自動選擇**  
    - 題數>10且樣本>100：Autoencoder
    - 題數5–20且樣本30–100：Isolation Forest
    - 樣本<30：不啟用深度模型
7. **模型視覺化與互動檢查**  
    - 輸出異常分數，並用 t-SNE/UMAP 等降維方法可視化分佈
    - 支援互動點擊查看異常填答者答題紀錄
    """)
    st.info("目的：自動化、可視化地協助研究者檢查問卷資料品質與異常填答。")
